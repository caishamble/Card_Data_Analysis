from main import compute_stats

def test_compute_stats():

    # Test 1: Compute the stats for some searches

    card_data = [('88264978', 'Red-Eyes Darkness Metal Dragon', 'Effect Monster', 'You can Special Summon this card (from your hand) by banishing 1 face-up Dragon monster you control. You can only Special Summon "Red-Eyes Darkness Metal Dragon" once per turn this way. During your Main Phase: You can Special Summon 1 Dragon monster from your hand or GY, except "Red-Eyes Darkness Metal Dragon". You can only use this effect of "Red-Eyes Darkness Metal Dragon" once per turn.', 'Dragon', 'Red-Eyes', 0.14), ('52684508', 'Inferno Fire Blast', 'Spell Card', 'Target 1 "Red-Eyes B. Dragon" in your Monster Zone; inflict damage to your opponent equal to its original ATK. "Red-Eyes B. Dragon" cannot attack the turn you activate this card.', 'Normal', 'Red-Eyes', 0.16), ('36262024', "Black Dragon's Chick", 'Effect Monster', 'You can send this face-up card you control to the Graveyard; Special Summon 1 "Red-Eyes B. Dragon" from your hand.', 'Dragon', 'Red-Eyes', 0.19), ('45410988', 'Red-Eyes Transmigration', 'Spell Card', 'This card is used to Ritual Summon "Lord of the Red". You must also Tribute monsters from your hand or field, and/or banish "Red-Eyes" monsters from your Graveyard, except "Red-Eyes B. Chick", whose total Levels equal 8 or more.', 'Ritual', 'Red-Eyes', 0.21), ('39387565', 'Return of the Red-Eyes', 'Trap Card', 'If you control a "Red-Eyes" monster, except "Red-Eyes B. Chick": You can target 1 Normal Monster in your Graveyard; Special Summon it. If this card in your possession is destroyed by an opponent\'s card effect and sent to your Graveyard: You can target 1 "Red-Eyes" monster in your Graveyard, except "Red-Eyes B. Chick"; Special Summon it. You can only use each effect of "Return of the Red-Eyes" once per turn.', 'Continuous', 'Red-Eyes', 0.22), ('18803791', 'Dark Dragon Ritual', 'Spell Card', 'This card is used to Ritual Summon "Paladin of Dark Dragon". You must also Tribute monsters from your hand or field whose total Levels equal 4 or more. During your Main Phase, except the turn this card was sent to the Graveyard: You can banish this card from your Graveyard; add 1 "Red-Eyes" Spell/Trap Card from your Deck to your hand.', 'Ritual', 'Red-Eyes', 0.24), ('44397496', 'Red-Eyes Spirit', 'Trap Card', 'Target 1 "Red-Eyes" monster in your GY; Special Summon it.', 'Normal', 'Red-Eyes', 0.24), ('19747827', 'Red-Eyes Black Dragon Sword', 'Fusion Monster', 'Must be Special Summoned with "The Claw of Hermos", using a Dragon monster. If this card is Special Summoned: Target 1 other face-up monster on the field; equip this card to it. It gains 1000 ATK, and 500 ATK/DEF for each Dragon monster on the field and in the GYs.', 'Dragon', 'Red-Eyes', 0.25), ('96561011', 'Red-Eyes Darkness Dragon', 'Effect Monster', 'Cannot be Normal Summoned/Set. Must be Special Summoned (from your hand) by Tributing 1 "Red-Eyes B. Dragon" and cannot be Special Summoned by other ways. This card gains 300 ATK for each Dragon-Type monster in your Graveyard.', 'Dragon', 'Red-Eyes', 0.25), ('53485634', 'Red-Eyes Retro Dragon', 'Effect Monster', 'If a Level 7 or lower "Red-Eyes" monster(s) you control is destroyed by your opponent\'s attack or card effect and sent to your GY, while this card is in your hand: You can Special Summon this card in Defense Position, and if you do, Special Summon as many of those destroyed monsters as possible in the same position they were in when destroyed. You can Tribute this card; you can Normal Summon 1 "Red-Eyes" monster during your Main Phase this turn in addition to your Normal Summon/Set. (You can only gain this effect once per turn.)', 'Dragon', 'Red-Eyes', 0.25), ('71782404', 'Red-Eyes Burn', 'Trap Card', 'If a face-up "Red-Eyes" monster(s) you control, except "Red-Eyes B. Chick", is destroyed by battle or card effect: Target 1 of those monsters; both players take damage equal to its original ATK. You can only activate 1 "Red-Eyes Burn" per turn.', 'Normal', 'Red-Eyes', 0.27), ('71408082', 'Paladin of Dark Dragon', 'Ritual Effect Monster', 'You can Ritual Summon this card with "Dark Dragon Ritual". At the start of the Damage Step, if this card attacks a Defense Position monster: Destroy that monster. You can Tribute this card; Special Summon 1 "Red-Eyes" monster from your hand or Deck, except "Red-Eyes B. Chick". You can only use this effect of "Paladin of Dark Dragon" once per turn.', 'Dragon', 'Red-Eyes', 0.28), ('28240337', 'Red-Eyes Zombie Necro Dragon', 'Synchro Monster', '1 Tuner + 1+ non-Tuner monsters\nGains 100 ATK/DEF for each Zombie monster on the field and in the GYs. When another Zombie monster is destroyed by battle: You can Special Summon 1 Zombie monster from either GY to your field. You can only use this effect of "Red-Eyes Zombie Necro Dragon" once per turn.', 'Zombie', 'Red-Eyes', 0.29), ('32566831', 'Cards of the Red Stone', 'Spell Card', 'Send 1 Level 7 "Red-Eyes" monster from your hand to the Graveyard; draw 2 cards, then you can send 1 Level 7 "Red-Eyes" monster from your Deck to the Graveyard. You can only activate 1 "Cards of the Red Stone" per turn.', 'Normal', 'Red-Eyes', 0.31), ('74677422', 'Red-Eyes Black Dragon', 'Normal Monster', "''A ferocious dragon with a deadly attack.''", 'Dragon', 'Red-Eyes', 0.36), ('19025379', 'Lord of the Red', 'Ritual Effect Monster', 'You can Ritual Summon this card with "Red-Eyes Transmigration". Once per turn, during either player\'s turn, when a card or effect is activated, except "Lord of the Red": You can target 1 monster on the field; destroy it. Once per turn, during either player\'s turn, when a card or effect is activated, except "Lord of the Red": You can target 1 Spell/Trap Card on the field; destroy it.', 'Dragon', 'Red-Eyes', 0.39), ('38192988', 'Red-Eyes Zombie Dragon Lord', 'Synchro Monster', '1 Zombie Tuner + 1+ non-Tuner monsters\nDuring your opponent\'s turn (Quick Effect): You can target 1 Zombie monster in your GY, except "Red-Eyes Zombie Dragon Lord"; Special Summon it. If this card is in your GY: You can banish 1 Zombie monster you control; Special Summon this card. You can only use each effect of "Red-Eyes Zombie Dragon Lord" once per turn.', 'Zombie', 'Red-Eyes', 0.43), ('6556909', 'Red-Eyes Soul', 'Effect Monster', 'This card\'s name becomes "Red-Eyes Black Dragon" while on the field or in the GY. If your opponent Special Summons a monster(s) (except during the Damage Step): You can send this card from your hand or field to the GY; Special Summon 1 "Red-Eyes" monster from your hand or Deck, except "Red-Eyes Soul". You can only use this effect of "Red-Eyes Soul" once per turn. (Quick Effect): You can target 1 "Red-Eyes Black Dragon" in your Monster Zone; inflict damage to your opponent equal to its original ATK. You can only use this effect of "Red-Eyes Soul" once per Duel.', 'Dragon', 'Red-Eyes', 0.44), ('64335805', 'Red-Eyes Black Metal Dragon', 'Effect Monster', 'Cannot be Normal Summoned/Set. Must first be Special Summoned (from your Deck) by Tributing "Red-Eyes B. Dragon" equipped with "Metalmorph".', 'Machine', 'Red-Eyes', 0.45), ('6172122', 'Red-Eyes Fusion', 'Spell Card', 'Fusion Summon 1 Fusion Monster that lists a "Red-Eyes" monster as material from your Extra Deck, using monsters from your hand, Deck, or field as Fusion Materials, and if you do, its name becomes "Red-Eyes B. Dragon". You cannot Normal or Special Summon other monsters the turn you activate this card. You can only activate 1 "Red-Eyes Fusion" per turn.', 'Normal', 'Red-Eyes', 0.45), ('67300516', 'Red-Eyes Wyvern', 'Effect Monster', 'During your End Phase, if you did not Normal Summon/Set a monster this turn: You can banish this card from your Graveyard; Special Summon 1 "Red-Eyes" monster from your Graveyard, except "Red-Eyes B. Chick".', 'Dragon', 'Red-Eyes', 0.46), ('5186893', 'Red-Eyes Zombie Dragon', 'Effect Monster', 'You can Tribute Summon this card in Attack Position by Tributing 1 Zombie monster. When this card destroys a Zombie monster by battle and sends it to the GY: You can Special Summon that Zombie monster.', 'Zombie', 'Red-Eyes', 0.55), ('90660762', 'Meteor Black Dragon', 'Fusion Monster', '"Red-Eyes Black Dragon" + "Meteor Dragon"', 'Dragon', 'Red-Eyes', 0.71), ('30079770', 'Red-Eyes Black Flare Dragon', 'Gemini Monster', 'This card is treated as a Normal Monster while face-up on the field or in the Graveyard. While this card is a Normal Monster on the field, you can Normal Summon it to have it become an Effect Monster with this effect.\n‚óè If damage calculation is performed involving this card, at the end of the Battle Phase: You can inflict damage to your opponent equal to this card\'s original ATK. You can only use this effect of "Red-Eyes Black Flare Dragon" once per turn.', 'Dragon', 'Red-Eyes', 0.73), ('85651167', 'Gearfried the Red-Eyes Iron Knight', 'Effect Monster', 'Once per turn, if either player equips an Equip Card(s) to this card: You can destroy those Equip Cards, then you can destroy 1 Spell/Trap your opponent controls. Once per turn: You can send 1 Equip Card you control that is equipped to this card to the GY, then target 1 Level 7 or lower "Red-Eyes" monster in your GY; Special Summon it.', 'Warrior', 'Red-Eyes', 0.77), ('93969023', 'Black Metal Dragon', 'Effect Monster', 'You can target 1 "Red-Eyes" monster you control; equip this monster from your hand or field to that target. It gains 600 ATK. If this card is sent from the field to the GY: You can add 1 "Red-Eyes" card from your Deck to your hand.', 'Dragon', 'Red-Eyes', 0.78), ('27657173', 'Red-Eyes Black Meteor Dragon', 'Effect Monster', 'You can send 1 Level 5 or higher Normal Monster from your hand or Deck to the GY; Special Summon this card from your hand, then increase its Level by 1. During your Main Phase, except the turn this card was sent to the GY: You can banish this card from your GY; add 1 "Red-Eyes Fusion" from your Deck or GY to your hand. You can only use each effect of "Red-Eyes Black Meteor Dragon" once per turn.', 'Dragon', 'Red-Eyes', 1.42), ('17871506', 'Meteor Dragon Red-Eyes Impact', 'Gemini Monster', 'This card is treated as a Normal Monster while face-up on the field or in the Graveyard. While this card is a Normal Monster on the field, you can Normal Summon it to have it become an Effect Monster with this effect.\n‚óè Other "Red-Eyes" monsters you control cannot be destroyed by battle or card effects.', 'Dragon', 'Red-Eyes', 1.46), ('44405066', 'Red-Eyes Flare Metal Dragon', 'XYZ Monster', '2 Level 7 monsters\nCannot be destroyed by card effects while it has Xyz Material. While this card has Xyz Material, each time your opponent activates a card or effect, inflict 500 damage to your opponent immediately after it resolves. Once per turn, during either player\'s turn: You can detach 1 Xyz Material from this card, then target 1 "Red-Eyes" Normal Monster in your Graveyard; Special Summon it.', 'Dragon', 'Red-Eyes', 1.99), ('18491580', 'Red-Eyes Alternative Black Dragon', 'Effect Monster', 'Cannot be Normal Summoned/Set. Must first be Special Summoned (from your hand) by Tributing 1 "Red-Eyes" monster from your hand or field. You can only Special Summon "Red-Eyes Alternative Black Dragon" once per turn this way. If this card is destroyed by battle, or if this card in its owner\'s possession is destroyed by an opponent\'s card effect: You can target 1 Level 7 or lower "Red-Eyes" monster in your GY, except "Red-Eyes Alternative Black Dragon"; Special Summon it, and if it was a "Red-Eyes B. Dragon" that was Special Summoned, its original ATK becomes doubled.', 'Dragon', 'Red-Eyes', 2.63), ('30086349', 'Meteor Black Comet Dragon', 'Fusion Monster', '1 Level 7 "Red-Eyes" monster + 1 Level 6 Dragon-Type monster\nIf this card is Fusion Summoned: You can send 1 "Red-Eyes" monster from your hand or Deck to the Graveyard, and if you do, inflict damage to your opponent equal to half the original ATK of that monster. If this card is sent from the Monster Zone to the Graveyard: You can target 1 Normal Monster in your Graveyard; Special Summon it.', 'Dragon', 'Red-Eyes', 2.99), ('79266769', 'Darkness Metal, the Dragon of Dark Steel', 'Link Monster', '2+ Effect Monsters with the same Type and Attribute\nYou can target 1 of your monsters that is banished or in your GY; Special Summon it to your zone this card points to, in Defense Position, but its effects are negated, also you cannot Special Summon Link Monsters for the rest of this turn, and the Summoned monster is placed on the bottom of the Deck when it leaves the field. You can only use this effect of "Darkness Metal, the Dragon of Dark Steel" once per turn.', 'Dragon', 'Red-Eyes', 3.92), ('66574418', 'The Black Stone of Legend', 'Effect Monster', 'You can Tribute this card; Special Summon 1 Level 7 or lower "Red-Eyes" monster from your Deck, except "Red-Eyes B. Chick". If this card is in your Graveyard: You can target 1 Level 7 or lower "Red-Eyes" monster in your Graveyard, except "Red-Eyes B. Chick"; shuffle it into the Deck, and if you do, add this card to your hand. You can only use 1 "The Black Stone of Legend" effect per turn, and only once that turn.', 'Dragon', 'Red-Eyes', 4.16), ('92353449', 'Red-Eyes Insight', 'Spell Card', 'Send 1 "Red-Eyes" monster from your hand or Deck to the Graveyard; add 1 "Red-Eyes" Spell/Trap Card from your Deck to your hand, except "Red-Eyes Insight". You can only activate 1 "Red-Eyes Insight" per turn.', 'Normal', 'Red-Eyes', 6.28), ('57135971', 'Red-Eyes Fang with Chain', 'Trap Card', 'Target 1 "Red-Eyes" monster you control; equip this card to it. It can make up to 2 attacks on monsters during each Battle Phase. You can send this Equip Card to the GY, then target 1 Effect Monster on the field; equip that target to the monster this card was equipped to, and if you do, while a monster is equipped to it by this effect, its ATK/DEF become equal to the original ATK/DEF of that equipped monster.', 'Normal', 'Red-Eyes', 8.18), ('21140872', 'Red-Eyes Slash Dragon', 'Fusion Monster', '"Red-Eyes B. Dragon" + 1 Warrior monster\nWhen a "Red-Eyes" monster declares an attack: You can target 1 Warrior monster in your GY; equip it to this card as an Equip Spell with this effect. ‚óè The equipped monster gains 200 ATK.\nWhen a card or effect is activated that targets a card you control (Quick Effect): You can send 1 Equip Card you control to the GY; negate the activation, and if you do, destroy that card. If this card is destroyed by battle or card effect: You can Special Summon as many monsters from your GY as possible, that were equipped to this card.', 'Dragon', 'Red-Eyes', 10.44), ('37818794', 'Red-Eyes Dark Dragoon', 'Fusion Monster', '"Dark Magician" + "Red-Eyes Black Dragon" or 1 Dragon Effect Monster\nCannot be destroyed by card effects. Neither player can target this card with card effects. During your Main Phase: You can destroy 1 monster your opponent controls, and if you do, inflict damage to your opponent equal to that monster\'s original ATK. You can use this effect a number of times per turn up to the number of Normal Monsters used as Fusion Material for this card. Once per turn, when a card or effect is activated (Quick Effect): You can discard 1 card; negate the activation, and if you do, destroy that card, and if you do that, this card gains 1000 ATK.', 'Spellcaster', 'Red-Eyes', 19.31)]

    instructor_min_cards = [('88264978', 'Red-Eyes Darkness Metal Dragon', 'Effect Monster',
       'You can Special Summon this card (from your hand) by banishing 1 face-up Dragon monster you control. You can only Special Summon "Red-Eyes Darkness Metal Dragon" once per turn this way. During your Main Phase: You can Special Summon 1 Dragon monster from your hand or GY, except "Red-Eyes Darkness Metal Dragon". You can only use this effect of "Red-Eyes Darkness Metal Dragon" once per turn.',
       'Dragon', 'Red-Eyes', 0.14)]
    instructor_min_price = 0.14
    instructor_max_cards = [('37818794', 'Red-Eyes Dark Dragoon', 'Fusion Monster',
                                             '"Dark Magician" + "Red-Eyes Black Dragon" or 1 Dragon Effect Monster\nCannot be destroyed by card effects. Neither player can target this card with card effects. During your Main Phase: You can destroy 1 monster your opponent controls, and if you do, inflict damage to your opponent equal to that monster\'s original ATK. You can use this effect a number of times per turn up to the number of Normal Monsters used as Fusion Material for this card. Once per turn, when a card or effect is activated (Quick Effect): You can discard 1 card; negate the activation, and if you do, destroy that card, and if you do that, this card gains 1000 ATK.',
                                             'Spellcaster', 'Red-Eyes', 19.31)]
    instructor_max_price = 19.31
    instructor_med_cards = [('64335805','Red-Eyes Black Metal Dragon','Effect Monster',
                            'Cannot be Normal Summoned/Set. Must first be Special Summoned (from your Deck) by Tributing "Red-Eyes B. Dragon" equipped with "Metalmorph".',
                            'Machine', 'Red-Eyes', 0.45),
                            ('6172122', 'Red-Eyes Fusion','Spell Card',
                             'Fusion Summon 1 Fusion Monster that lists a "Red-Eyes" monster as material from your Extra Deck, using monsters from your hand, Deck, or field as Fusion Materials, and if you do, its name becomes "Red-Eyes B. Dragon". You cannot Normal or Special Summon other monsters the turn you activate this card. You can only activate 1 "Red-Eyes Fusion" per turn.',
                            'Normal', 'Red-Eyes', 0.45)
                            ]
    instructor_med_price = 0.45

    student_min_cards, student_min_price, student_max_cards, student_max_price, \
    student_med_cards, student_med_price = compute_stats(card_data)
    print(student_min_price, student_min_cards)
    print(student_max_price,student_max_cards)
    print(student_med_price, student_med_cards)
    assert instructor_min_price == student_min_price and instructor_min_cards == student_min_cards and \
           instructor_max_cards == student_max_cards and instructor_max_price == student_max_price and \
           instructor_med_cards == student_med_cards and instructor_med_price == student_med_price

    card_data = [('12508268', 'Future Drive', 'Spell Card', 'Target 1 "Utopic Future" Xyz Monster you control; apply the following effect(s) to that monster you control for the rest of this turn.\n‚óè It can attack all monsters your opponent controls once each.\n‚óè If it battles an opponent\'s monster, that monster\'s effects are negated during the Damage Step only.\n‚óè Each time it destroys an opponent\'s monster by battle, inflict damage to your opponent equal to the destroyed monster\'s original ATK.\nYou can only activate 1 "Future Drive" per turn.', 'Quick-Play', 'Utopia', 0.05), ('18865703', 'ZW - Ultimate Shield', 'Effect Monster', 'When this card is Normal or Special Summoned: You can target 1 of your banished Xyz Monsters; Special Summon that target in face-up Defense Position. You can target 1 "Utopia" monster you control; equip this monster on the field to that target. It gains 2000 DEF. You can only control 1 face-up "ZW - Ultimate Shield".', 'Aqua', 'Utopia', 0.05), ('29353756', 'ZW - Eagle Claw', 'Effect Monster', 'If your opponent\'s Life Points are at least 2000 higher than yours, you can Special Summon this card (from your hand). You can target 1 "Utopia" monster you control; equip this monster on the field to that target. It gains 2000 ATK. Once per turn, while this card is equipped to a monster, when a Trap Card or Trap effect that was activated on your opponent\'s side of the field resolves, negate the effects of that card. You can only control 1 "ZW - Eagle Claw".', 'Winged Beast', 'Utopia', 0.06), ('60992364', 'ZW - Leo Arms', 'XYZ Monster', '2 Level 5 monsters\nThis card cannot attack your opponent directly. Once per turn: You can detach 1 Xyz Material from this card; add 1 "ZW -" monster from your Deck to your hand. You can target 1 "Utopia" monster you control; equip this monster on the field to that target. It gains 3000 ATK. During your Battle Phase, if a monster attacked this turn while equipped with this card: You can send this Equip Card to the Graveyard; the monster that was equipped with this card can make a second attack, on an opponent\'s monster, during this Battle Phase.', 'Beast', 'Utopia', 0.06), ('20285786', 'Halfway to Forever', 'Trap Card', 'Target 2 monsters in your GY; Special Summon both, but negate their effects (if any), and if you do, immediately after this effect resolves, Xyz Summon 1 LIGHT "Utopia" or "Utopic" Xyz Monster using only those 2 monsters.', 'Normal', 'Utopia', 0.07), ('56840427', 'Number C39: Utopia Ray', 'XYZ Monster', '3 Level 4 LIGHT monsters\nYou can also Xyz Summon this card by using a "Number 39: Utopia" you control as the Xyz Material. (Xyz Materials attached to that monster also become Xyz Materials on this card.) You can detach 1 Xyz Material from this card; it gains 500 ATK and 1 monster your opponent controls loses 1000 ATK, until the End Phase. You must have 1000 Life Points or less to activate and to resolve this effect.', 'Warrior', 'Utopia', 0.07), ('94807487', 'Rising Sun Slash', 'Spell Card', 'Equip only to a "Utopia" monster. It cannot be destroyed by card effects. Each time an attack is negated, place 1 Rising Sun Counter on this card. The equipped monster gains 500 ATK for each Rising Sun Counter on this card. If the equipped monster you control would detach its Xyz Material to activate its effect, you can treat this card as 1 of the Xyz Materials.', 'Equip', 'Utopia', 0.1), ('95664204', 'Zexal Catapult', 'Spell Card', 'Special Summon 1 "ZW -" or "ZS -" monster from your hand, then, if you control a "Utopia" monster, you can make all monsters you currently control become all Level 4 or all Level 5. During your Main Phase, except the turn this card was sent to the GY: You can banish 1 "ZW -" or "ZS -" monster and this card from your GY, then target 1 card your opponent controls; destroy it. You can only use each effect of "Zexal Catapult" once per turn.', 'Normal', 'Utopia', 0.1), ('94950218', 'Reverse Breaker', 'Spell Card', 'Equip only to a "Utopia" monster. When the equipped monster declares an attack: Target 1 Spell/Trap Card your opponent controls; destroy that target. Your opponent cannot activate Spell/Trap Cards in response to this effect\'s activation.', 'Equip', 'Utopia', 0.11), ('32281491', 'ZS - Ouroboros Sage', 'Effect Monster', 'When this card is Normal Summoned: You can Special Summon 1 non-LIGHT "Number" monster from your GY, but negate its effects, and if you do, equip both this card and 1 "Utopia" monster you control to it, each as an Equip Spell that gives it 1700 ATK, also you can only declare one attack for the rest of this turn. When the monster equipped with this card by this card\'s effect declares an attack on your opponent\'s monster: You can double the attacking monster\'s ATK, but destroy it during the End Phase.', 'Warrior', 'Utopia', 0.11), ('75402014', 'Ultimate Dragonic Utopia Ray', 'XYZ Monster', '3 Level 5 monsters\n(This card\'s name is always treated as "Number C39: Utopia Ray".)\nOnce per turn, when a card or effect is activated that targets this card, or when this card is targeted for an attack (Quick Effect): You can equip 1 "ZW -" monster from your hand or Deck to this card as if it were equipped by that monster\'s effect. Once per turn: You can detach 1 material from this card, then target face-up cards your opponent controls up to the number of "ZW -" Monster Cards equipped to this card; negate their effects.', 'Warrior', 'Utopia', 0.12), ('81471108', 'ZW - Tornado Bringer', 'Effect Monster', 'You can target 1 "Utopia" monster you control; equip this monster from your hand or your side of the field to that target. It gains 1300 ATK. While this card is equipped to a monster, your opponent cannot target that monster with card effects. If a monster equipped with this card would be destroyed by battle, destroy this card instead. You can only control 1 face-up "ZW - Tornado Bringer".', 'Dragon', 'Utopia', 0.12), ('38777931', 'Release, Reverse, Burst', 'Trap Card', 'Tribute 1 "Utopia" monster; destroy all Set Spell and Trap Cards your opponent controls.', 'Normal', 'Utopia', 0.13), ('12927849', 'SZW - Fenrir Sword', 'Effect Monster', 'When this card is Normal Summoned: You can target 1 "ZW -" monster you control that is an Equip Card; Special Summon that target in Defense Position. You can target 1 "Utopia" monster you control; equip this card from your hand to that target. When the equipped monster destroys an opponent\'s monster by battle and sends it to the Graveyard: You can target 1 "ZW -" monster in your Graveyard; add that target to your hand.', 'Beast', 'Utopia', 0.13), ('95886782', 'ZW - Sylphid Wing', 'Effect Monster', 'You can only control 1 "ZW - Sylphid Wing". You can target 1 "Utopia" monster you control; equip this card from your hand or field to it. It gains 800 ATK. Once per turn, if a monster(s) is Special Summoned by your opponent\'s activated effect: You can make the equipped monster gain 1600 ATK. (This ATK gain remains even if this card leaves the field or the monster becomes unaffected by card effects.) If you activate the equipped monster\'s effect by detaching its material, you can send this card to the GY instead of 1 of those materials.', 'Beast', 'Utopia', 0.13), ('83880087', 'Light Wing Shield', 'Spell Card', 'When a monster\'s attack is negated: Activate 1 of these effects;\n‚óè It becomes the End Phase of this turn.\n‚óè Target 1 "Utopia" Xyz Monster you control; its ATK becomes double its original ATK until the end of this turn.\nIf a "Utopia" Xyz Monster you control would detach exactly 1 Xyz Material to activate its effect, you can banish this card from your Graveyard instead.', 'Quick-Play', 'Utopia', 0.14), ('72502414', 'Xyz Agent', 'Effect Monster', 'If this card is in your Graveyard: You can target 1 "Utopia" Xyz Monster you control; attach this card from the Graveyard to it as an Xyz Material. You can only use the effect of "Xyz Agent" once per Duel.', 'Spellcaster', 'Utopia', 0.14), ('84013237', 'Number 39: Utopia', 'XYZ Monster', '2 Level 4 monsters\nWhen a monster declares an attack: You can detach 1 material from this card; negate the attack. If this card is targeted for an attack, while it has no material: Destroy this card.', 'Warrior', 'Utopia', 0.15), ('51865604', 'ZS - Vanish Sage', 'Effect Monster', 'If you control a "Utopia" monster: You can draw 1 card. If a monster(s) you control is banished during the Battle Phase (except during the Damage Step): You can banish this card from the field, then target 1 of those banished monsters; Special Summon that target, and if you do, banish 1 monster your opponent controls that has 3000 or less ATK. You can only use 1 "ZS - Vanish Sage" effect per turn, and only once that turn.', 'Warrior', 'Utopia', 0.15), ('76080032', 'ZW - Unicorn Spear', 'Effect Monster', 'You can target 1 "Number C39: Utopia Ray" you control; equip this card from your hand to that target. It gains 1900 ATK. If the equipped monster battles an opponent\'s monster, the opponent\'s monster\'s effect is negated during the Battle Phase only. You can only control 1 "ZW - Unicorn Spear".', 'Beast', 'Utopia', 0.15), ('93777634', 'Number 39: Utopia Rising', 'XYZ Monster', '2 Level 4 monsters\nIf this card is Special Summoned: You can target 1 "Number" Xyz Monster in your GY, except "Number 39: Utopia Rising"; Special Summon it in Defense Position, then you can transfer this card\'s materials to that monster. If you Xyz Summon: You can Special Summon this card from your GY, but banish it when it leaves the field. You can only use each effect of "Number 39: Utopia Rising" once per turn.', 'Warrior', 'Utopia', 0.16), ('23187256', 'Number 93: Utopia Kaiser', 'XYZ Monster', '2+ "Number" Xyz Monsters, with the same Rank, that have material\nOnce per turn: You can Special Summon Rank 9 or lower "Number" monsters with 3000 or less ATK that have different Ranks from each other from your Extra Deck, up to the number of materials with different names attached to this card, but their effects are negated, then detach 1 material from this card. For the rest of this turn, unless this effect was negated, you cannot Special Summon, and any battle damage your opponent takes becomes halved. While you control another "Number" Xyz Monster, this card cannot be destroyed by battle or card effects.', 'Warrior', 'Utopia', 0.19), ('33725002', 'V Salamander', 'Effect Monster', 'When this card is Normal Summoned: You can target 1 "Utopia" monster in your Graveyard; Special Summon that target. You can target 1 "Number C39: Utopia Ray V" you control; equip this monster you control to that target. Once per turn, while this card is equipped to a monster: You can detach 1 Xyz Material from the equipped monster; negate the equipped monster\'s effects (even after this card leaves the field or the monster becomes unaffected by card effects), and if you do, destroy all monsters your opponent controls, and if you do that, inflict 1000 damage to your opponent for each monster destroyed by this effect.', 'Spellcaster', 'Utopia', 0.19), ('31123642', 'ZS - Utopic Sage', 'XYZ Monster', '2 Level 4 monsters\nYou can detach 2 materials from this card; Special Summon 1 "ZW -" or "ZS -" monster from your Deck, also for the rest of this turn, you can only attack with "Number" monsters, and you cannot Special Summon from the Extra Deck, except Xyz Monsters. You can only use this effect of "ZS - Utopic Sage" once per turn. If a "Utopia" or "Utopic" Xyz Monster(s) you control whose original Attribute is LIGHT would be destroyed by battle or card effect, except "ZS - Utopic Sage", you can banish this card from your field or GY instead.', 'Warrior', 'Utopia', 0.2), ('2648201', 'ZW - Sleipnir Mail', 'Effect Monster', 'You can target 1 "Utopia" monster you control; equip this monster from your hand or your side of the field to that target. It gains 1000 ATK. When this card you control is sent to your Graveyard because the equipped monster was destroyed by your opponent\'s card (by battle or card effect): You can target 1 "Utopia" monster in your Graveyard; Special Summon that target. You can only control 1 "ZW - Sleipnir Mail".', 'Beast', 'Utopia', 0.2), ('66970002', 'Number C39: Utopia Ray V', 'XYZ Monster', '3 Level 5 monsters\nWhen this card in its owner\'s possession is destroyed by an opponent\'s card (either by battle or by card effect): You can target 1 Xyz Monster in your Graveyard; return that target to the Extra Deck. If this card has a "Utopia" monster as an Xyz Material, it gains this effect.\n‚óè Once per turn: You can detach 1 Xyz Material from this card, then target 1 monster your opponent controls; destroy that monster, and if you do, inflict damage to your opponent equal to the destroyed monster\'s ATK on the field.', 'Warrior', 'Utopia', 0.22), ('21858819', 'Number XX: Utopic Dark Infinity', 'XYZ Monster', '2+ Level 10 monsters\nWhen a monster is destroyed by battle and sent to the GY: You can detach 1 material from this card, then target that monster; Special Summon it to your field in Defense Position. You can target 1 other face-up Special Summoned monster you control; gain LP equal to its original ATK. You can only use each effect of "Number XX: Utopic Dark Infinity" once per turn.', 'Warrior', 'Utopia', 0.22), ('71345905', 'Rank-Down-Magic Numeron Fall', 'Spell Card', 'Target 1 "Utopia" monster you control; Special Summon from your Extra Deck, 1 "Utopia" monster with a lower Rank than that monster you control, by using it as the Xyz Material. (This Special Summon is treated as an Xyz Summon. Xyz Materials attached to it also become Xyz Materials on the Summoned monster.) The monster Xyz Summoned by this effect gains this effect.\n‚óè If this card attacks, or is attacked by, an opponent\'s monster, the opponent\'s monster\'s effects are negated during the Battle Phase only.', 'Normal', 'Utopia', 0.22), ('62829077', 'Shining Hope Road', 'Spell Card', 'Target 3 monsters in your Graveyard; Special Summon all 3, but their effects are negated. Immediately after this effect resolves, Xyz Summon 1 "Utopia" or "Utopic" Xyz Monster using only those 3 monsters. You cannot Special Summon other monsters during the turn you activate this card.', 'Normal', 'Utopia', 0.22), ('87008374', 'ZW - Phoenix Bow', 'Effect Monster', 'You can target 1 face-up "Number C39: Utopia Ray" you control; equip this card from your hand to that target. It gains 1100 ATK. When the equipped monster destroys an opponent\'s monster by battle: Inflict 1000 damage to your opponent. You can only control 1 face-up "ZW - Phoenix Bow".', 'Winged Beast', 'Utopia', 0.25), ('35906693', 'Shining Draw', 'Spell Card', 'To activate this card, you must draw it for your normal draw in your Draw Phase, reveal it, and keep it revealed until the Main Phase 1. During your Main Phase 1 that same turn: You can target 1 "Utopia" Xyz Monster you control, then activate 1 of these effects;\n‚óè Equip any number of "ZW -" monsters with different names from your Deck/Extra Deck to it.\n‚óè Special Summon from your Extra Deck, 1 "Utopia" Xyz Monster with a different name from that target, by using that target as material. (This is treated as an Xyz Summon. Transfer its materials to the Summoned monster.)', 'Normal', 'Utopia', 0.26), ('11705261', 'Xyz Change Tactics', 'Spell Card', 'When a "Utopia" monster is Xyz Summoned to your field: You can pay 500 LP; draw 1 card. You can only control 1 "Xyz Change Tactics".', 'Continuous', 'Utopia', 0.27), ('8512558', 'Utopic Onomatopoeia', 'Effect Monster', '(This card is always treated as a "Zubaba", "Gagaga", "Gogogo", and "Dododo" card.)\nDuring your Main Phase: You can Special Summon up to 1 each "Zubaba", "Gagaga", "Gogogo", and/or "Dododo" monster(s) from your hand in Defense Position, also you cannot Special Summon from the Extra Deck for the rest of this turn, except Xyz Monsters. You can only use this effect of "Utopic Onomatopoeia" once per turn.', 'Warrior', 'Utopia', 0.28), ('27062594', 'The Door of Destiny', 'Trap Card', 'When an opponent\'s monster declares a direct attack: Negate the attack, then Special Summon this card as an Effect Monster (Fiend-Type/LIGHT/Level 1/ATK 0/DEF 0). (This card is also still a Trap Card.) During your Standby Phase, while this card is treated as a monster: You can banish any number of "Utopia" monsters with different names from your Graveyard; inflict 500 damage to your opponent for each of those banished monsters, and if you do, this card gains ATK equal to the damage they took.', 'Continuous', 'Utopia', 0.29), ('95134948', 'Number 99: Utopia Dragonar', 'XYZ Monster', '3+ Level 12 monsters\n(Quick Effect): You can detach 2 materials from this card; Special Summon from your Extra Deck, 1 "Number" monster that has a number between "1" and "100" in its name. (This is treated as an Xyz Summon.) The turn you activate this effect, other monsters you control cannot attack directly, also you cannot Special Summon from the Extra Deck, except Xyz Monsters. When an opponent\'s monster declares an attack: You can change the ATK of the opponent\'s monster to 0. You can only use each effect of "Number 99: Utopia Dragonar" once per turn.', 'Warrior', 'Utopia', 0.35), ('68679595', 'Ultimate Leo Utopia Ray', 'XYZ Monster', '3 Level 5 monsters\n(This card is always treated as "Number C39: Utopia Ray".)\nOnce per turn: You can detach 1 material from this card; equip 1 "ZW -" monster from your Deck or Extra Deck to this card as if it were equipped by that monster\'s effect. This effect\'s activation and effect cannot be negated. Once per turn, while this card is equipped with a "ZW -" Monster Card (Quick Effect): You can target 1 Effect Monster your opponent controls; negate its effects, and if you do, halve its ATK.', 'Warrior', 'Utopia', 0.36), ('43490025', 'Number F0: Utopic Future Slash', 'XYZ Monster', '2 Xyz Monsters with the same Rank, except "Number" monsters\n(This card\'s original Rank is always treated as 1.)\nYou can also Xyz Summon this card by using a "Utopia" monster or "Number F0: Utopic Future" you control as material. (Transfer its materials to this card.) Gains 500 ATK for each "Number" Xyz Monster in the GYs. Cannot be destroyed by battle. Once per turn: You can detach 1 material from this card; this card can make a second attack during each Battle Phase this turn.', 'Warrior', 'Utopia', 0.41), ('30341772', 'Utopia Buster', 'Spell Card', 'If you control a "Utopia" monster: Destroy the 1 face-up monster your opponent controls that has the lowest ATK (your choice, if tied), and if you do, inflict damage to your opponent equal to the destroyed monster\'s ATK on the field.', 'Normal', 'Utopia', 0.45), ('52653092', 'Number S0: Utopic ZEXAL', 'XYZ Monster', '3 "Number" Xyz Monsters with the same Rank\n(This card\'s original Rank is always treated as 1.) You can also Xyz Summon this card by discarding 1 "Rank-Up-Magic" Normal Spell Card, then using a "Utopia" monster you control as the Xyz Material. (Transfer its Xyz Materials to this card.) This card\'s Xyz Summon cannot be negated. When Xyz Summoned, your opponent\'s cards and effects cannot be activated. Gains 1000 ATK and DEF for each Xyz Material attached to it. Once per opponent\'s turn (Quick Effect): You can detach 1 Xyz Material from this card; your opponent\'s cards and effects cannot be activated this turn.', 'Warrior', 'Utopia', 0.46), ('40941889', 'ZW - Asura Strike', 'Effect Monster', 'You can target 1 "Utopia" monster you control; equip this monster from your hand or your side of the field to that target. It gains 1000 ATK. While this card is equipped to a monster, that monster can attack all monsters your opponent controls once each. You can only control 1 "ZW - Asura Strike".', 'Fairy', 'Utopia', 0.5), ('21521304', 'Number 39: Utopia Beyond', 'XYZ Monster', '2 Level 6 monsters\nIf this card is Xyz Summoned: The ATK of all monsters your opponent currently controls become 0. Once per turn, during either player\'s turn: You can detach 1 Xyz Material from this card, then target 1 face-up Xyz Monster you control and 1 "Utopia" monster in your Graveyard; banish the first target, and if you do, Special Summon the second target, then gain 1250 LP.', 'Warrior', 'Utopia', 0.55), ('84124261', 'Number 39: Utopia Roots', 'XYZ Monster', "2 Level 1 monsters\nWhen any player's monster declares an attack: You can detach 1 Xyz Material from this card; negate the attack, and if you negated an Xyz Monster's attack, this card gains ATK equal to that monster's Rank x 500.", 'Warrior', 'Utopia', 0.66), ('56832966', 'Number S39: Utopia the Lightning', 'XYZ Monster', '3 Level 5 LIGHT monsters\nYou can also Xyz Summon this card by using a Rank 4 "Utopia" monster you control as material. (Transfer its materials to this card.) Cannot be used as material for an Xyz Summon. If this card battles, your opponent cannot activate cards or effects until the end of the Damage Step. Once per Chain, during damage calculation, if this card battles an opponent\'s monster while this card has a "Utopia" Xyz Monster as material (Quick Effect): You can detach 2 materials from this card; this card\'s ATK becomes 5000 during that damage calculation only.', 'Warrior', 'Utopia', 0.73), ('45082499', 'ZW - Lightning Blade', 'Effect Monster', 'You can target 1 "Utopia" monster you control; equip this monster from your hand or your side of the field to that target. It gains 1200 ATK. While this card is equipped to a monster, face-up "ZW -" cards you control cannot be destroyed by your opponent\'s card effects. If a monster equipped with this card would be destroyed by a card effect, destroy this card instead. You can only control 1 face-up "ZW - Lightning Blade".', 'Beast', 'Utopia', 1.14), ('86532744', 'Number S39: Utopia Prime', 'XYZ Monster', '3 Level 4 LIGHT monsters\nYou can also Xyz Summon this card by using a "Number 39: Utopia" you control as the Xyz Material. (Xyz Materials attached to that monster also become Xyz Materials on this card.) If your opponent\'s LP is at least 3000 higher than yours: You can detach 3 Xyz Materials from this card and pay LP so that you only have 10 left; destroy as many Special Summoned monsters your opponent controls as possible, and if you do, banish them, then inflict 300 damage to your opponent for each monster banished.', 'Warrior', 'Utopia', 1.41), ('51543904', 'Number 99: Utopic Dragon', 'XYZ Monster', '3 Level 10 monsters\nYou can also Xyz Summon this card by discarding 1 "Rank-Up-Magic" Spell Card and using a "Utopia" monster you control as the Xyz Material. (Xyz Materials attached to that monster also become Xyz Materials on this card.) Once per turn: You can target 1 "Number" monster in your Graveyard; Special Summon it in Defense Position, but its effects are negated. During either player\'s turn, when a monster effect is activated that targets this face-up card: You can detach 1 Xyz Material from this card; negate the activation, and if you do, destroy that card.', 'Dragon', 'Utopia', 4.27), ('87911394', 'Number C39: Utopia Ray Victory', 'XYZ Monster', '3 Level 5 monsters\nIf this card attacks, your opponent cannot activate any Spell/Trap Cards until the end of the Damage Step. If this card has a "Utopia" monster as an Xyz Material, it gains this effect.\n‚óè When this card declares an attack on a face-up monster your opponent controls: You can detach 1 Xyz Material from this card; negate that opponent\'s face-up monster\'s effects, also this card gains ATK equal to that opponent\'s monster\'s ATK. These changes last until the end of this turn.', 'Warrior', 'Utopia', 5.37), ('26973555', 'Number F0: Utopic Draco Future', 'XYZ Monster', '3 Xyz Monsters with the same Rank, except "Number" monsters\n(This card\'s original Rank is always treated as 1. This card is always treated as a "Utopic Future" card.)\nYou can also Xyz Summon this card by using "Number F0: Utopic Future" you control as material. (Transfer its materials to this card.) Cannot be destroyed by battle or card effects. Once per turn, when your opponent activates a monster effect (Quick Effect): You can detach 1 material from this card; negate the activation, then, if that monster is on the field, gain control of it.', 'Warrior', 'Utopia', 5.9), ('62517849', 'Number 39: Utopia Double', 'XYZ Monster', '2 Level 4 monsters\n(Quick Effect): You can detach 1 material from this card; add 1 "Double or Nothing!" from your Deck to your hand, then Special Summon from your Extra Deck, 1 "Utopia" Xyz Monster, except "Number 39: Utopia Double", by using this face-up card you control as material, and if you do, its ATK becomes doubled, but it cannot attack directly. (This is treated as an Xyz Summon. Transfer its materials to the Summoned monster.) You can only use this effect of "Number 39: Utopia Double" once per turn.', 'Warrior', 'Utopia', 10.06)]

    instructor_min_cards = [('12508268', 'Future Drive', 'Spell Card',
       'Target 1 "Utopic Future" Xyz Monster you control; apply the following effect(s) to that monster you control for the rest of this turn.\n‚óè It can attack all monsters your opponent controls once each.\n‚óè If it battles an opponent\'s monster, that monster\'s effects are negated during the Damage Step only.\n‚óè Each time it destroys an opponent\'s monster by battle, inflict damage to your opponent equal to the destroyed monster\'s original ATK.\nYou can only activate 1 "Future Drive" per turn.',
       'Quick-Play', 'Utopia', 0.05), ('18865703', 'ZW - Ultimate Shield', 'Effect Monster',
                                       'When this card is Normal or Special Summoned: You can target 1 of your banished Xyz Monsters; Special Summon that target in face-up Defense Position. You can target 1 "Utopia" monster you control; equip this monster on the field to that target. It gains 2000 DEF. You can only control 1 face-up "ZW - Ultimate Shield".',
                                       'Aqua', 'Utopia', 0.05)]
    instructor_min_price = 0.05
    instructor_max_cards = [('62517849', 'Number 39: Utopia Double','XYZ Monster',
                            '2 Level 4 monsters\n(Quick Effect): You can detach 1 material from this card; add 1 "Double or Nothing!" from your Deck to your hand, then Special Summon from your Extra Deck, 1 "Utopia" Xyz Monster, except "Number 39: Utopia Double", by using this face-up card you control as material, and if you do, its ATK becomes doubled, but it cannot attack directly. (This is treated as an Xyz Summon. Transfer its materials to the Summoned monster.) You can only use this effect of "Number 39: Utopia Double" once per turn.',
                            'Warrior', 'Utopia', 10.06)
                            ]
    instructor_max_price = 10.06
    instructor_med_cards = [('31123642','ZS - Utopic Sage','XYZ Monster',
                             '2 Level 4 monsters\nYou can detach 2 materials from this card; Special Summon 1 "ZW -" or "ZS -" monster from your Deck, also for the rest of this turn, you can only attack with "Number" monsters, and you cannot Special Summon from the Extra Deck, except Xyz Monsters. You can only use this effect of "ZS - Utopic Sage" once per turn. If a "Utopia" or "Utopic" Xyz Monster(s) you control whose original Attribute is LIGHT would be destroyed by battle or card effect, except "ZS - Utopic Sage", you can banish this card from your field or GY instead.',
                            'Warrior','Utopia',0.2),
                            ('2648201','ZW - Sleipnir Mail','Effect Monster',
                            'You can target 1 "Utopia" monster you control; equip this monster from your hand or your side of the field to that target. It gains 1000 ATK. When this card you control is sent to your Graveyard because the equipped monster was destroyed by your opponent\'s card (by battle or card effect): You can target 1 "Utopia" monster in your Graveyard; Special Summon that target. You can only control 1 "ZW - Sleipnir Mail".',
                            'Beast','Utopia',0.2)]
    instructor_med_price = 0.2

    student_min_cards, student_min_price, student_max_cards, student_max_price, \
    student_med_cards, student_med_price = compute_stats(card_data)
    print(student_min_price, student_min_cards)
    print(student_max_price, student_max_cards)
    print(student_med_price, student_med_cards)
    assert instructor_min_price == student_min_price and instructor_min_cards == student_min_cards and \
           instructor_max_cards == student_max_cards and instructor_max_price == student_max_price and \
           instructor_med_cards == student_med_cards and instructor_med_price == student_med_price




test_compute_stats()

